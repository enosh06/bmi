<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI Calculator</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Poppins', sans-serif;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas#bgCanvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 0;
        }

        /* ================= CARD ================= */
        .bmi-card {
            position: relative;
            z-index: 1;
            background: rgba(255, 255, 255, 0.96);
            padding: 35px 30px;
            border-radius: 20px;
            width: 100%;
            max-width: 420px;
            text-align: center;
            transition: box-shadow 0.5s ease, transform 0.3s ease;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.3);
        }

        /* ========= BMI GLOW STATES ========= */
        .glow-under {
            box-shadow:
                0 0 20px #4facfe,
                0 0 40px #00f2fe,
                0 0 70px rgba(79, 172, 254, 0.8);
        }

        .glow-normal {
            box-shadow:
                0 0 25px #43e97b,
                0 0 50px #38f9d7,
                0 0 90px rgba(67, 233, 123, 0.9);
        }

        .glow-over {
            box-shadow:
                0 0 25px #f7971e,
                0 0 50px #ffd200,
                0 0 90px rgba(255, 210, 0, 0.9);
        }

        .glow-obese {
            box-shadow:
                0 0 25px #ff416c,
                0 0 50px #ff4b2b,
                0 0 90px rgba(255, 65, 108, 0.9);
        }

        input {
            border-radius: 12px;
            padding: 12px 15px;
            margin-bottom: 15px;
        }

        button {
            border-radius: 12px;
            font-weight: 600;
            padding: 12px;
        }

        #result {
            margin-top: 20px;
            font-size: 18px;
            font-weight: 500;
        }
    </style>
</head>

<body>

    <canvas id="bgCanvas"></canvas>

    <div class="bmi-card" id="bmiCard">
        <h2>BMI Calculator</h2>
        <label>ENTER YOUR WEIGHT</label>
        <input type="number" id="weight" class="form-control mb-3" placeholder="Weight (kg)">
        <label>ENTER YOUR HEIGHT</label>
        <input type="number" id="height" class="form-control mb-3" placeholder="Height (cm)">
        <button class="btn btn-primary w-100 mt-3" onclick="bmi()">Calculate BMI</button>
        <p id="result"></p>
    </div>

    <!-- ðŸ”Š Sounds -->
    <audio id="soundUnderweight" src="./among-us-sound-157106.mp3"></audio>
    <audio id="crackerSound" src="./fireworks-09-419028.mp3"></audio>
    <audio id="soundOver" src="./bang-100662.mp3"></audio>
    <audio id="soundObese" src="./thud-sound-effect-405470.mp3"></audio>

    <script>
        const myConfetti = confetti.create(null, { resize: true, useWorker: true });
        const result = document.getElementById("result");
        const card = document.getElementById("bmiCard");

        let theme = "default";

        function playSound(id) {
            const s = document.getElementById(id);
            if (s) { s.currentTime = 0; s.play(); }
        }

        function resetGlow() {
            card.classList.remove("glow-under", "glow-normal", "glow-over", "glow-obese");
        }

        function bmi() {
            let w = document.getElementById("weight").value;
            let h = document.getElementById("height").value / 100;

            if (!w || !h) {
                result.innerHTML = "<span class='text-danger'>Enter valid values</span>";
                return;
            }

            let bmiValue = w / (h * h);
            let category = "";

            resetGlow();

            if (bmiValue < 18.5) {
                category = "Underweight";
                theme = "under";
                card.classList.add("glow-under");
                playSound("soundUnderweight");
            }
            else if (bmiValue < 25) {
                category = "Normal weight";
                theme = "normal";
                card.classList.add("glow-normal");
                playSound("crackerSound");
                myConfetti({ particleCount: 250, spread: 220 });
            }
            else if (bmiValue < 30) {
                category = "Overweight";
                theme = "over";
                card.classList.add("glow-over");
                playSound("soundOver");
            }
            else {
                category = "Obese";
                theme = "obese";
                card.classList.add("glow-obese");
                playSound("soundObese");
            }

            result.innerHTML = `ðŸŽ¯ BMI: <b>${bmiValue.toFixed(2)}</b><br>Status: <b>${category}</b>`;
        }

        /* ================= BACKGROUND ================= */
        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = Array.from({ length: 120 }, () => ({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            r: Math.random() * 3 + 1,
            dx: (Math.random() - 0.5) * 1.2,
            dy: (Math.random() - 0.5) * 1.2,
            hue: Math.random() * 360
        }));

        function drawParticles() {
            let grad = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);

            if (theme === "under") {
                grad.addColorStop(0, "#4facfe");
                grad.addColorStop(1, "#00f2fe");
            } else if (theme === "normal") {
                grad.addColorStop(0, "#43e97b");
                grad.addColorStop(1, "#38f9d7");
            } else if (theme === "over") {
                grad.addColorStop(0, "#f7971e");
                grad.addColorStop(1, "#ffd200");
            } else if (theme === "obese") {
                grad.addColorStop(0, "#ff416c");
                grad.addColorStop(1, "#ff4b2b");
            } else {
                grad.addColorStop(0, "#141e30");
                grad.addColorStop(1, "#243b55");
            }

            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            particles.forEach(p => {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                ctx.fillStyle = `hsl(${p.hue},100%,70%)`;
                ctx.fill();

                p.x += p.dx;
                p.y += p.dy;

                if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
                if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
            });

            requestAnimationFrame(drawParticles);
        }

        drawParticles();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>

</body>

</html>