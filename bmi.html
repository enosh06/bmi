<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BMI Calculator</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        font-family: 'Poppins', sans-serif;
        background: black;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    canvas#bgCanvas {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 0;
    }

    .bmi-card {
        position: relative;
        z-index: 1;
        background: rgba(255, 255, 255, 0.95);
        padding: 35px 30px;
        border-radius: 20px;
        width: 100%;
        max-width: 420px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .bmi-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    }

    input {
        border-radius: 12px;
        padding: 12px 15px;
        border: 1px solid #ddd;
        margin-bottom: 15px;
        transition: all 0.3s ease;
    }

    input:focus {
        outline: none;
        border-color: #6a11cb;
        box-shadow: 0 0 15px rgba(106, 17, 203, 0.5);
    }

    button {
        border-radius: 12px;
        font-weight: 600;
        padding: 12px;
        transition: all 0.3s ease;
    }

    button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    #result {
        margin-top: 20px;
        font-size: 18px;
        font-weight: 500;
        color: #333;
    }
</style>
</head>

<body>

<canvas id="bgCanvas"></canvas>

<div class="bmi-card">
    <h2>BMI Calculator</h2>
    <label>ENTER YOUR WEIGHT</label>
    <input type="number" id="weight" class="form-control mb-3" placeholder="Weight (kg)">
    <label>ENTER YOUR HEIGHT</label>
    <input type="number" id="height" class="form-control mb-3" placeholder="Height (cm)">
    <button class="btn btn-primary w-100 mt-3" onclick="bmi()">Calculate BMI</button>
    <p id="result"></p>
</div>

<!-- ðŸ”Š Sounds -->
<audio id="soundUnderweight" src="./among-us-sound-157106.mp3"></audio>
<audio id="crackerSound" src="./fireworks-09-419028.mp3"></audio>
<audio id="soundOver" src="./bang-100662.mp3"></audio>
<audio id="soundObese" src="./thud-sound-effect-405470.mp3"></audio>

<script>
const myConfetti = confetti.create(null, { resize: true, useWorker: true });
const result = document.getElementById("result");

function playSound(id) {
    const s = document.getElementById(id);
    if (s) { s.currentTime = 0; s.play(); }
}

function bmi() {
    let w = document.getElementById("weight").value;
    let h = document.getElementById("height").value / 100;

    if (!w || !h) {
        result.innerHTML = "<span class='text-danger'>Enter valid values</span>";
        return;
    }

    let bmiValue = w / (h * h);
    let category = "";

    if (bmiValue < 18.5) category = "Underweight";
    else if (bmiValue < 25) category = "Normal weight";
    else if (bmiValue < 30) category = "Overweight";
    else category = "Obese";

    result.innerHTML = `ðŸŽ¯ BMI: <b>${bmiValue.toFixed(2)}</b><br>Status: <b>${category}</b>`;

    if (category === "Normal weight") {
        playSound("crackerSound");
        const colors = ["#FFD700","#FF4500","#FF1493","#00FF7F","#1E90FF","#9400D3"];
        const duration = 5000;
        const end = Date.now() + duration;

        (function launchRockets() {
            myConfetti({
                particleCount: 6,
                angle: 90,
                spread: 30,
                startVelocity: 70,
                gravity: 0.9,
                ticks: 250,
                colors: colors,
                origin: { x: Math.random(), y: 1 }
            });
            if (Date.now() < end) requestAnimationFrame(launchRockets);
        })();

        setTimeout(() => {
            myConfetti({
                particleCount: 400,
                spread: 220,
                startVelocity: 55,
                colors: colors,
                origin: { x: 0.5, y: 0.35 }
            });
            myConfetti({
                particleCount: 200,
                spread: 180,
                startVelocity: 30,
                colors: ["#FFD700","#FFF4B2"],
                origin: { x: 0.5, y: 0.2 }
            });
        }, 3000);
    }

    if (category === "Underweight") playSound("soundUnderweight");
    if (category === "Overweight") playSound("soundOver");
    if (category === "Obese") playSound("soundObese");
}

// ------------------------
// Dynamic gradient + particle background
// ------------------------
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let mouse = { x: canvas.width/2, y: canvas.height/2 };
document.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });

const particles = [];
const particleCount = 120;
for(let i=0;i<particleCount;i++){
    particles.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        r: Math.random()*3+1,
        dx: (Math.random()-0.5)*1.5,
        dy: (Math.random()-0.5)*1.5,
        hue: Math.random()*360
    });
}

function drawParticles() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    let grad = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
    grad.addColorStop(0, `hsl(${(Date.now()/50)%360}, 80%, 50%)`);
    grad.addColorStop(0.5, `hsl(${(Date.now()/30)%360}, 70%, 40%)`);
    grad.addColorStop(1, `hsl(${(Date.now()/70)%360}, 85%, 45%)`);
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    particles.forEach(p=>{
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fillStyle = `hsl(${p.hue}, 100%, 70%)`;
        ctx.shadowBlur = 10;
        ctx.shadowColor = `hsl(${p.hue}, 100%, 80%)`;
        ctx.fill();

        p.x += p.dx;
        p.y += p.dy;

        if(p.x<0||p.x>canvas.width) p.dx*=-1;
        if(p.y<0||p.y>canvas.height) p.dy*=-1;
    });

    requestAnimationFrame(drawParticles);
}
drawParticles();

window.addEventListener('resize', ()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
</script>

</body>
</html>
